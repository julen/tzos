<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8" />
        <!--[if lt IE 9]>
        <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
        <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.min.js"></script>
        <link rel="stylesheet" type="text/css" href="{{ url_for('.static', filename='style.css') }}" />
        <title>{% block title %}TZOS â€” {% endblock %}</title>
    </head>
    <body>
        <header class="content">
            <a href="{{ url_for('frontend.index') }}" id="logo">TZOS</a>
            <nav class="in fr">
                <ul class="in fl">
                    {% if g.user %}
                    <li>{{ g.user.username }}</li>
                    <li><a href="{{ url_for('auth.logout') }}">{{ _('Log out') }}</a></li>
                    {% else %}
                    <li><a href="{{ url_for('auth.register') }}" class="register">{{ _('Register') }}</a></li>
                    <li><a href="{{ url_for('auth.login') }}">{{ _('Log in') }}</a></li>
                    {% endif %}
                </ul>
                <form class="fl headerSearch" method="GET" action="{{ url_for('search.quick') }}">
                    <input type="search" class="in" name="q" placeholder="{{ _('Search terms') }}" />
                    <a href="{{ url_for('search.quick') }}" class="i16 advancedSearch" title="{{ 'Advanced search' }}">{{ 'Advanced search' }}</a>
                </form>
            </nav>
        </header>
        <section id="glossary">
            <div class="content menu">
                <ul>
                    {% for letter in ['0-9', 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z'] %}
                    <li{% if loop.first %} class="first"{% endif %}><a href="{{ url_for('terms.list_letter', letter=letter) }}">{{ letter }}</a></li>
                    {% endfor %}
                    <li id="tzosDict" class="dict"><a href="{{ url_for('frontend.dict') }}">{{ session.tzos_dict }}</a>
                        <ul class="dictList" style="display:none;">
                            {% for dict_lang, dict_langname in tzos_dicts %}
                            {% if dict_lang != session.tzos_dict %}
                            <li><a href="{{ url_for(request.endpoint, setdict=dict_lang) }}">{{ dict_langname }}</a></li>
                            {% endif %}
                            {% endfor %}
                        </ul>
                    </li>
                </ul>
            </div>
        </section>
        <section id="body" class="content">
        {% with messages = get_flashed_messages(with_categories=True) %}
          {% if messages %}
            {% for category, message in messages %}
            <div class="flash{% if category %} flash{{ category|title }}{% endif %}">
                {% if category == 'error' %}
                <h1 class="in h3">{{ _('Error') }}</h1>
                {% endif %}
                <p class="in">{{ message }}</p>
            </div>
            {% endfor %}
          {% endif %}
        {% endwith %}
        {% block intro %}
            <div class="intro">
            {% block intro_content %}
                <h1 class="h2 in">{% block intro_title %}{% endblock %}</h1>
                <p class="p2 in">{% block intro_text %}{% endblock %}</p>
            {% endblock %}
            </div>
        {% endblock %}
        {% block content %}{% endblock %}
        </section>
        <footer>
            <section id="locales" class="content">
                <ul class="in fl aDark">
                    {% for lang_code, lang_name in langs %}
                    <li>{% if lang_code == g.lang %}<span class="current">{{ lang_name }}</span>{% else %}<a href="{{ url_for(request.endpoint, lang=lang_code) }}">{{ lang_name }}</a>{% endif %}</li>
                    {% endfor %}
                </ul>
            </section>
        </footer>
        {% block scripts %}
        <script type="text/javascript" src="{{ url_for('.static', filename='tzos.js') }}"></script>
        {% endblock %}
    </body>
</html>
