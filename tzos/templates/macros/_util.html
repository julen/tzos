{% macro render_pagination(pagination, endpoint) %}
{% if pagination.pages > 1 %}
<ul class="pagination">
  {%- for page in pagination.iter_pages() %}
  <li>
    {% if page %}
      {% if page != pagination.page %}
        <a href="[[ url_for2(endpoint, p=page) ]]">[[ page ]]</a>
      {% else %}
        <span class="current">[[ page ]]</span>
      {% endif %}
    {% else %}
      <span class="ellipsis">â€¦</span>
    {% endif %}
  </li>
  {%- endfor %}
</ul>
{% endif %}
{% endmacro %}


{% macro render_comments(comments, gravatar=True, username=True) %}
<ul>
    {%- for c in comments %}
    <li id="comment-[[ c.id ]]">{% if gravatar %}<a href="[[ url_for('user.profile', username=c.author.username) ]]" title="[[ _("%(user)s's profile", user=c.author.username) ]]"><img class="fl" src="[[ c.author.gravatar_url(32) ]]" /></a>{% endif %}{% if username %}<strong><a href="[[ url_for('user.profile', username=c.author.username) ]]" title="[[ _("%(user)s's profile", user=c.author.username) ]]">[[ c.author.username ]]</a></strong>{% endif %}<span class="weak small datetime">[[ c.date_created|datetimeformat(_('d/M/yyyy HH:mm')) ]]</span><span class="permalink"><a href="[[ c.permalink ]]">[[ _('Permalink') ]]</a></span><br />[[ c.comment ]]</li>
    {%- endfor %}
</ul>
{% endmacro %}


{% macro term_link(term) %}
<a href="[[ url_for('terms.detail', id=term.id) ]]">[[ term.term ]]</a>
{% endmacro %}

{% macro render_term(term, show_details=False, show_actions=False) %}
<div class="term">
    <ul class="term">
        <li class="term">[[ term_link(term) ]]</li>
        {%- if term.subject_field %}
        <li class="meta weak">{% for field in term.subject_field %}<span>[[ _t(field) ]]</span>{% if not loop.last %}, {% endif %}{% endfor %}</li>
        {%- endif %}
        {% if term.synonyms %}
        <li>
            <dl class="syn">
                <dt class="in"><abbr class="small" title="[[ _('Synonyms') ]]">[[ _('syn.') ]]</abbr></dt>
                <dd class="in">{% for syn in term.synonyms %}<a href="[[ syn.url ]]">[[ syn.term ]]</a>{% if not loop.last %}, {% endif %}{% endfor %}</dd>
            </dl>
        </li>
        {% endif %}

        {% if term.translations %}
        <li>
            <dl class="trans">
            {% for lang in term.translations %}
            <dt>[[ lang ]]</dt>
            <dd lang="[[ lang ]]">{% for trans in term.translations[lang] %}<a href="[[ trans.url ]]">[[ trans.term ]]</a>{% if not loop.last %}, {% endif %}{% endfor %}</dd>
            {% endfor %}
            </dl>
        </li>
        {% endif %}

        {%- if show_details %}

        {%- if term.term_type %}
        <li class="more">[[ _t(term.term_type) ]]</li>
        {%- endif %}
        {%- if term.part_of_speech %}
        <li class="more">[[ _t(term.part_of_speech) ]]</li>
        {%- endif %}
        {%- if term.normative_authorization %}
        <li class="more">[[ _t(term.normative_authorization) ]]{% if term.normative_authorization_org %} ([[ term.normative_authorization_org ]]){% endif %}</li>
        {%- endif %}
        <li class="more">[[ _('Origin:') ]] [[ term.concept_origin ]] <span class="weak">([[ term.originating_person_display ]])</span></li>
        {% if term.product_subset %}
        <li class="more">[[ _('Appears in:') ]] [[ _t(term.product_subset) ]]</li>
        {% endif %}
        {% if term.subordinate_concept_generic %}
        <li class="more">[[ _('Hyponym:') ]] [[ term.subordinate_concept_generic ]]</li>
        {% endif %}
        {% if term.superordinate_concept_generic %}
        <li class="more">[[ _('Hypernym:') ]] [[ term.superordinate_concept_generic ]]</li>
        {% endif %}
        {% if term.antonym_concept %}
        <li class="more">[[ _('Antonym:') ]] [[ term.antonym_concept ]]</li>
        {% endif %}
        {% if term.related_concept %}
        <li class="more">[[ _('Related concept:') ]] [[ term.related_concept ]]</li>
        {% endif %}
        {% if term.cross_reference %}
        <li class="more">[[ _('See also:') ]] [[ term.cross_reference ]]</li>
        {% endif %}

        {%- endif %}
    </ul>
    {%- if show_actions %}
    <ul class="termActions in small">
        {% if g.user %}
        <li><a href="[[ url_for('terms.add', lang=term.language, term=term.term) ]]">[[ _('Add synonym/translation') ]]</a></li>
        {% if g.user.owns_term(term.id) or g.user.is_moderator %}
        <li><a href="[[ url_for('terms.edit', id=term.id) ]]">[[ _('Edit term') ]]</a></li>
        {% endif %}
        {% endif %}
    </ul>
    {%- endif %}
</div>
{% endmacro %}
